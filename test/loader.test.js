/* global test, expect */
import compiler from './compiler.js'

test('should equal base64 encoding', async () => {
  const stats = await compiler('example.png')
  const output = stats.toJson({ source: true }).modules[0].source
  expect(output).toBe(
    'export default "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjUxQkE1RjlCQzAyMjExRUFBRUY2RkI1MzJERUVCQkUyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjUxQkE1RjlDQzAyMjExRUFBRUY2RkI1MzJERUVCQkUyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTFCQTVGOTlDMDIyMTFFQUFFRjZGQjUzMkRFRUJCRTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTFCQTVGOUFDMDIyMTFFQUFFRjZGQjUzMkRFRUJCRTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7OV1XRAAAGZ0lEQVR42uxaa2wUVRQ+2+5uu9uFQmlLAsRC6ctWaE0hrSJCNCJgWok2Wo3VRAJIxJSAIBaFWIwQECG+qiEhCv6otWJ9YQrxB0HS1tYC8kha2tKCgmwToIFu22W76/nmsd0u+5hhX5J4kpO5s3fmznfuOfc7Z+6sxuFw0N0sUXSXi9Zbx8wv+7x1zWB9jXUBa0qQcFxgrWetYj2OH/58KT7oHjCwfsp6knVZEMFD7pHGbGX9nNWo9EaNtzXg5gET62HWQpw8naGn0qwYmhYfnAg832en2vYh+qbNSnYRThPr4+yFvmB5ALNSmJkQTdVFJnqzwBA08BCMtW62gcceQ1n8DJYC6ZlBCaH5rM+bdBraMc9IaeOiQ7YgU9mQnfONNDZGg9NnOQoeDdQA9O8WRsvS0yRT6ElrYlwUlWbq5dPdbIRWtQFWO1FLmcACS1lzZyZF08q82LBR4/LcWLo/WcB9n7S41Xtg1v6+sXx4V1604RaXZ1ayF8bdSQi9zZo8Z7KWnkgNvwELp+lo7hTBC4msm1QZwLOfxody2Z2RkmUznc9exV7IUJOJ32fVFU3XU84EkXX6bUS/9IQetFFHNG8SURwjy+ZnF6fp6YcOK/9KO1mL/CYytvQRPvyaZIiimmITjdELlEYbGom6b4Rn5qeOIdpWKLZvWB1U+tNNutJvFyKLk1u9Vw8w+GiZNpek65zgITL4xZz0jdrQALewlw9eGD1RwPBUup6qTgzi9APGmMtG2LyF0HIUa3lMYSu8xP6LmaGdfRjgLktnxFDTZRu1XrFl8+kK1k9uW8QSVVWiXRIB2vQnJaNpdbwnFgJVJYK6QGFqZedJ/2sERFB1hmvx34hKD4v3nL2mbPwFU3X08BQBVwLr5lEGSBS1yo26VLm92Uz02Rnf4Le0EB25RNQ7IP6Geyql35TRaozcfJUxZ7muAYE2QVnZE3wXa7WdnheevNDRn2QYASlLz80RD5WkitfUdonX7WsTqdOf3MvYljDGug4rcO9iXaRlSx4CvyYbo2h1vv/Zx0MD6c/m6C2ZLnG+VgwjeAfGgT79yZrZsfT7Pza6dNO+kLHP00oFGy1O1dFYF9r0BcCTYAYxk/0SwSERpbgA6h0UZxtHXIP+3sGR/jiF1GzUaoQ1uvfUEE5fxm0PoIWsq0Q2zfId5zAC8koO0ezkkT7EORYwjEBSBGA5pDApCCmlAqySAQ/CACH6Eg2agKkOSa7FLIaCK3jZQ2AceRH3umTdlTnqnpM0gnUyDBBqiWDtDq3N894HoIskI0Ugyhavu7hgdcCAv+BFs8VBpnj/XlDK2z7XUUJg4wGrJBdhwDGMWXfOSmtm+Wch8HakBVglOYZEtgetn7usHJv2//xO3NVBh4BVkj1aruyamU9r+oYcz3zUOkiVc3zvKVU/FlqAKDF8ye4/BgQjWA4w9kaZfd9gLT7YdSv2yTQb5U/URiSELDbf/SfMNmKMaIJDX3eWEmxJN3sB5cRbX5we8mgAuBoLLhiL2J94Y6a9p4fk5i7GfH7UGxkbEMeHduSFikKD8BLhLii+evxUnMiucnGGmse1vACwJD88keIhh0C+77DSlgahwLrMmskG3Bj1QsM/9LMRG7i570C71aMBGNjT4N5eSJx02TUCDsnuTuTbdufCrZDB3/ZOzAYgETRgb7IsO4bK89WV1ijMms2+r8EErM313n+LiVDntlfyIZPLvjNC+GAFFrABdo/bKtwBa1YLFjPXcsWnLsUrsDfF5LvfHbzZYnfl/XJX8B53JSRP7OfDC3gLem+ukSIpG49aqL5bYJ5qBv+c0p05rAXLIb6x4ZItYuBR90vgsXrXK96ZaymL/5sPW9H+6uxQxAyQ4h6ynWf/otq9UeyE9WA7o6bNGnbw+FrTKHofxeZ2VXujkhcGpAwtUFi4P8Z+1+GctPU8+xZVBuijhA1eNL9mPdp5fZi2NQ2EDfxWflb71WGSKL3a17VKPrmAVh3wQps4aEjl3LVhOWk5JNp0BGoAPn1+jMa6IxZs74UM/HEu1vAMSapQKfu7R+lnVtQVddiHkXcwSjJiKH18FBm0gb1LD9gc1HHdTihffux0xv0hvLuzAdZgGSDXTe/AEUiYIXLCsMQ4mxn8LSU3qPnsiNjZyIptyB2sp5DsgvEaII2Fch7bhRUoiZTerPn/3yoRln8FGACE3Ufl7EmQqgAAAABJRU5ErkJggg=="'
  )
})
